@tailwind base;
@tailwind components;
@tailwind utilities;

/* =============================================
 * GLASSMORPHISM DESIGN SYSTEM
 * Premium frosted glass effects for financial UI
 * ============================================= */

:root {
  /* Glass effect variables */
  --glass-bg: rgba(255, 255, 255, 0.1);
  --glass-bg-hover: rgba(255, 255, 255, 0.15);
  --glass-bg-solid: rgba(255, 255, 255, 0.85);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-hover: rgba(255, 255, 255, 0.3);
  --glass-shadow: rgba(0, 0, 0, 0.1);
  --glass-shadow-colored: rgba(59, 130, 246, 0.15);

  /* Glass blur intensities */
  --glass-blur-sm: 8px;
  --glass-blur-md: 12px;
  --glass-blur-lg: 16px;
  --glass-blur-xl: 24px;

  /* Glow effects */
  --glass-glow-subtle: 0 0 20px rgba(59, 130, 246, 0.1);
  --glass-glow-medium: 0 0 40px rgba(59, 130, 246, 0.15);
  --glass-glow-strong: 0 0 60px rgba(59, 130, 246, 0.2);

  /* Premium color accents for glass cards */
  --glass-accent-emerald: rgba(16, 185, 129, 0.2);
  --glass-accent-blue: rgba(59, 130, 246, 0.2);
  --glass-accent-amber: rgba(245, 158, 11, 0.2);
  --glass-accent-rose: rgba(244, 63, 94, 0.2);
  --glass-accent-purple: rgba(139, 92, 246, 0.2);

  /* Gradient overlay colors */
  --glass-gradient-start: rgba(255, 255, 255, 0.15);
  --glass-gradient-end: rgba(255, 255, 255, 0.05);
}

.dark {
  --glass-bg: rgba(15, 23, 42, 0.6);
  --glass-bg-hover: rgba(15, 23, 42, 0.7);
  --glass-bg-solid: rgba(15, 23, 42, 0.9);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-border-hover: rgba(255, 255, 255, 0.2);
  --glass-shadow: rgba(0, 0, 0, 0.3);
  --glass-shadow-colored: rgba(59, 130, 246, 0.25);

  --glass-glow-subtle: 0 0 20px rgba(59, 130, 246, 0.15);
  --glass-glow-medium: 0 0 40px rgba(59, 130, 246, 0.2);
  --glass-glow-strong: 0 0 60px rgba(59, 130, 246, 0.3);

  --glass-gradient-start: rgba(255, 255, 255, 0.1);
  --glass-gradient-end: rgba(255, 255, 255, 0.02);
}

/* Fix iOS Safari background behind keyboard - respects theme */
/* Default to dark background before hydration to prevent white flash */
html,
body {
  background-color: hsl(224 71% 4%); /* Dark default */
  overscroll-behavior-y: none; /* Prevents "bouncing" past limits */
}

/* Apply theme-specific backgrounds after class is added */
html.light,
html.light body {
  background-color: hsl(0 0% 100%);
}

html.dark,
html.dark body {
  background-color: hsl(224 71% 4%);
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* Enable smooth scrolling */
html {
  scroll-behavior: smooth;
}

/* Monospace for numbers */
.font-mono {
  font-variant-numeric: tabular-nums;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  /* =============================================
   * MOBILE-FIRST RESPONSIVE UTILITIES
   * ============================================= */

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Thin scrollbar for mobile-friendly horizontal scroll */
  .scrollbar-thin {
    scrollbar-width: thin;
  }
  .scrollbar-thin::-webkit-scrollbar {
    height: 4px;
    width: 4px;
  }
  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: rgb(156 163 175 / 0.5);
    border-radius: 2px;
  }
  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  /* Touch-friendly momentum scrolling */
  .-webkit-overflow-scrolling-touch {
    -webkit-overflow-scrolling: touch;
  }

  /* Safe area padding for notched devices */
  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }
  .pl-safe {
    padding-left: env(safe-area-inset-left);
  }
  .pr-safe {
    padding-right: env(safe-area-inset-right);
  }

  /* Mobile card stacking with horizontal scroll */
  .mobile-card-scroll {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
    padding: 0.5rem 0;
  }
  .mobile-card-scroll > * {
    scroll-snap-align: start;
    flex-shrink: 0;
    width: 85vw;
    max-width: 320px;
  }
  @media (min-width: 640px) {
    .mobile-card-scroll {
      overflow-x: visible;
      flex-wrap: wrap;
    }
    .mobile-card-scroll > * {
      width: auto;
      flex-shrink: 1;
    }
  }

  /* Custom animations */
  .animate-gradient {
    background-size: 200% auto;
    animation: gradient 6s ease infinite;
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.4) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
  }

  /* =============================================
   * GLASSMORPHISM UTILITY CLASSES
   * Premium frosted glass effects
   * ============================================= */

  /* Glass glow effects */
  .glass-glow-subtle {
    box-shadow: var(--glass-glow-subtle);
  }
  .glass-glow-medium {
    box-shadow: var(--glass-glow-medium);
  }
  .glass-glow-strong {
    box-shadow: var(--glass-glow-strong);
  }

  /* Glass gradient overlays */
  .glass-gradient-top {
    background-image: linear-gradient(
      to bottom,
      var(--glass-gradient-start),
      var(--glass-gradient-end)
    );
  }
  .glass-gradient-bottom {
    background-image: linear-gradient(
      to top,
      var(--glass-gradient-start),
      var(--glass-gradient-end)
    );
  }
  .glass-gradient-left {
    background-image: linear-gradient(
      to right,
      var(--glass-gradient-start),
      var(--glass-gradient-end)
    );
  }
  .glass-gradient-right {
    background-image: linear-gradient(
      to left,
      var(--glass-gradient-start),
      var(--glass-gradient-end)
    );
  }
  .glass-gradient-radial {
    background-image: radial-gradient(
      ellipse at 50% 0%,
      var(--glass-gradient-start),
      var(--glass-gradient-end)
    );
  }

  /* Glass noise texture overlay */
  .glass-noise::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    opacity: 0.03;
    pointer-events: none;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  }

  /* Glass inner glow */
  .glass-inner-glow::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(
      ellipse at 50% 0%,
      rgba(255, 255, 255, 0.15) 0%,
      transparent 50%
    );
  }

  /* Animated border effect */
  .glass-animated-border {
    position: relative;
  }
  .glass-animated-border::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.3),
      rgba(255, 255, 255, 0.1),
      rgba(255, 255, 255, 0.3)
    );
    background-size: 200% 200%;
    animation: glass-border-shimmer 3s ease infinite;
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  /* Glass shimmer effect */
  .glass-shimmer {
    position: relative;
    overflow: hidden;
  }
  .glass-shimmer-overlay {
    background: linear-gradient(
      120deg,
      transparent 30%,
      rgba(255, 255, 255, 0.1) 50%,
      transparent 70%
    );
    background-size: 200% 100%;
    animation: glass-shimmer 3s ease-in-out infinite;
  }

  /* Premium card base styles */
  .glass-card {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur-md));
    -webkit-backdrop-filter: blur(var(--glass-blur-md));
    border: 1px solid var(--glass-border);
    box-shadow:
      0 8px 32px var(--glass-shadow),
      inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border-radius: 1rem;
    transition: all 0.3s ease;
  }

  .glass-card:hover {
    background: var(--glass-bg-hover);
    border-color: var(--glass-border-hover);
    box-shadow:
      0 12px 40px var(--glass-shadow),
      inset 0 1px 0 rgba(255, 255, 255, 0.15);
  }

  /* Glass panel for larger sections */
  .glass-panel {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur-xl));
    -webkit-backdrop-filter: blur(var(--glass-blur-xl));
    border: 1px solid var(--glass-border);
    box-shadow: 0 25px 50px -12px var(--glass-shadow);
    border-radius: 1.5rem;
  }

  /* Frosted glass effect (stronger blur) */
  .glass-frosted {
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(var(--glass-blur-xl));
    -webkit-backdrop-filter: blur(var(--glass-blur-xl));
    border: 1px solid rgba(255, 255, 255, 0.3);
  }
  .dark .glass-frosted {
    background: rgba(15, 23, 42, 0.4);
    border-color: rgba(255, 255, 255, 0.15);
  }

  /* Colored glass accent variants */
  .glass-emerald {
    background: linear-gradient(135deg, var(--glass-accent-emerald), transparent);
    border-color: rgba(16, 185, 129, 0.3);
    box-shadow: 0 8px 32px rgba(16, 185, 129, 0.1);
  }
  .glass-blue {
    background: linear-gradient(135deg, var(--glass-accent-blue), transparent);
    border-color: rgba(59, 130, 246, 0.3);
    box-shadow: 0 8px 32px rgba(59, 130, 246, 0.1);
  }
  .glass-amber {
    background: linear-gradient(135deg, var(--glass-accent-amber), transparent);
    border-color: rgba(245, 158, 11, 0.3);
    box-shadow: 0 8px 32px rgba(245, 158, 11, 0.1);
  }
  .glass-rose {
    background: linear-gradient(135deg, var(--glass-accent-rose), transparent);
    border-color: rgba(244, 63, 94, 0.3);
    box-shadow: 0 8px 32px rgba(244, 63, 94, 0.1);
  }
  .glass-purple {
    background: linear-gradient(135deg, var(--glass-accent-purple), transparent);
    border-color: rgba(139, 92, 246, 0.3);
    box-shadow: 0 8px 32px rgba(139, 92, 246, 0.1);
  }

  /* Glass divider */
  .glass-divider {
    border: none;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      rgba(255, 255, 255, 0.2),
      transparent
    );
    margin: 1rem 0;
  }

  /* Premium text on glass */
  .glass-text {
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  }
  .glass-text-muted {
    color: rgba(255, 255, 255, 0.6);
  }

  /* Premium metric display */
  .glass-metric {
    font-variant-numeric: tabular-nums;
    letter-spacing: -0.02em;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  }
}

/* Glassmorphism Keyframes */
@keyframes glass-border-shimmer {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes glass-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

@keyframes glass-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.8;
  }
}

@keyframes glass-float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

@keyframes gradient {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Progress bar indeterminate animation */
@keyframes progress-indeterminate {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-progress-indeterminate {
  animation: progress-indeterminate 1.5s ease-in-out infinite;
}

/* Pulse glow animation for loading states */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.4);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(59, 130, 246, 0);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Fade up entrance animation */
@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-up {
  animation: fade-up 0.3s ease-out forwards;
}

/* Stagger children animation utility */
.stagger-children > * {
  animation: fade-up 0.3s ease-out forwards;
  opacity: 0;
}

.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 50ms; }
.stagger-children > *:nth-child(3) { animation-delay: 100ms; }
.stagger-children > *:nth-child(4) { animation-delay: 150ms; }
.stagger-children > *:nth-child(5) { animation-delay: 200ms; }
.stagger-children > *:nth-child(6) { animation-delay: 250ms; }

/* Brand loader cube animations */
@keyframes brand-spin {
  0% {
    transform: rotateX(0deg) rotateY(0deg);
  }
  100% {
    transform: rotateX(720deg) rotateY(720deg);
  }
}

@keyframes brand-settle {
  0% {
    transform: rotateX(720deg) rotateY(720deg);
  }
  100% {
    transform: rotateX(0deg) rotateY(0deg);
  }
}

@keyframes brand-handoff {
  0% {
    transform: rotateX(0deg) rotateY(0deg) scale(1);
    opacity: 1;
  }
  100% {
    transform: rotateX(0deg) rotateY(0deg) scale(0.5);
    opacity: 0;
  }
}

.animate-brand-spin {
  animation: brand-spin 2.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-brand-settle {
  animation: brand-settle 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-brand-handoff {
  animation: brand-handoff 0.3s cubic-bezier(0.4, 0, 0.6, 1) forwards;
}

/* =============================================
 * PREMIUM TOAST ANIMATIONS
 * Polished notification system with smooth UX
 * ============================================= */

/* Toast entrance animations by position */
@keyframes toast-slide-in-right {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes toast-slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes toast-slide-in-top {
  from {
    opacity: 0;
    transform: translateY(-100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes toast-slide-in-bottom {
  from {
    opacity: 0;
    transform: translateY(100%);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Toast exit animations */
@keyframes toast-slide-out-right {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

@keyframes toast-slide-out-left {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(-100%);
  }
}

/* Toast swipe dismiss feedback */
@keyframes toast-swipe-out {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

/* Progress bar animation for auto-dismiss */
@keyframes toast-progress {
  from {
    width: 100%;
  }
  to {
    width: 0%;
  }
}

/* Subtle bounce for attention-grabbing toasts */
@keyframes toast-attention {
  0%, 100% {
    transform: translateX(0);
  }
  10%, 30%, 50%, 70%, 90% {
    transform: translateX(-2px);
  }
  20%, 40%, 60%, 80% {
    transform: translateX(2px);
  }
}

/* Success checkmark animation */
@keyframes toast-success-check {
  0% {
    stroke-dashoffset: 100;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

/* Toast stack animation - subtle shrink for stacked toasts */
@keyframes toast-stack-shrink {
  from {
    transform: scale(1) translateY(0);
  }
  to {
    transform: scale(0.95) translateY(8px);
  }
}

/* Animation classes */
.animate-toast-in-right {
  animation: toast-slide-in-right 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-toast-in-left {
  animation: toast-slide-in-left 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-toast-in-top {
  animation: toast-slide-in-top 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-toast-in-bottom {
  animation: toast-slide-in-bottom 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.animate-toast-out-right {
  animation: toast-slide-out-right 0.2s ease-in forwards;
}

.animate-toast-out-left {
  animation: toast-slide-out-left 0.2s ease-in forwards;
}

.animate-toast-attention {
  animation: toast-attention 0.5s ease-in-out;
}

/* Toast progress bar smooth animation */
.toast-progress-bar {
  transition: width 100ms linear;
}

/* Toast action button hover states */
.toast-action-btn {
  transition: all 0.15s ease;
}

.toast-action-btn:hover {
  transform: translateY(-1px);
}

.toast-action-btn:active {
  transform: translateY(0);
}

/* Mobile swipe hint animation */
@keyframes toast-swipe-hint {
  0%, 100% {
    transform: translateX(0);
  }
  50% {
    transform: translateX(10px);
  }
}

@media (pointer: coarse) {
  /* Touch device optimizations */
  .toast-swipeable {
    touch-action: pan-x;
    user-select: none;
  }

  .toast-swipeable::after {
    content: '';
    position: absolute;
    top: 50%;
    right: 8px;
    transform: translateY(-50%);
    width: 4px;
    height: 24px;
    background: currentColor;
    opacity: 0.2;
    border-radius: 2px;
    animation: toast-swipe-hint 2s ease-in-out 2;
    animation-delay: 1s;
  }
}

/* Smooth transitions for layout shifts */
.wealth-flow-block {
  transition: margin-top 0.4s ease-out, transform 0.4s ease-out;
}

/* Center Sankey chart on mobile */
.wealth-flow-responsive {
  display: flex;
  justify-content: center;
  align-items: center;
}

@media (max-width: 768px) {
  .wealth-flow-responsive {
    margin: 0 auto;
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* =============================================
 * ACCESSIBILITY IMPROVEMENTS (WCAG 2.1 AA)
 * ============================================= */

/* Focus styles - visible focus rings for keyboard navigation */
:focus-visible {
  outline: 3px solid hsl(217.2 91.2% 59.8%);
  outline-offset: 2px;
}

/* Remove default focus for mouse users, keep for keyboard */
:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast focus styles for important interactive elements */
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible,
[role="tab"]:focus-visible,
[role="menuitem"]:focus-visible,
[role="option"]:focus-visible,
[role="checkbox"]:focus-visible,
[role="radio"]:focus-visible,
[role="switch"]:focus-visible,
[role="slider"]:focus-visible,
[role="link"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 3px solid hsl(217.2 91.2% 59.8%);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

/* Dark mode focus adjustments */
.dark button:focus-visible,
.dark a:focus-visible,
.dark [role="button"]:focus-visible,
.dark [role="tab"]:focus-visible,
.dark [role="menuitem"]:focus-visible,
.dark [role="option"]:focus-visible,
.dark [role="checkbox"]:focus-visible,
.dark [role="radio"]:focus-visible,
.dark [role="switch"]:focus-visible,
.dark [role="slider"]:focus-visible,
.dark [role="link"]:focus-visible,
.dark input:focus-visible,
.dark select:focus-visible,
.dark textarea:focus-visible {
  outline-color: hsl(213.1 93.9% 67.8%);
  box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.4);
}

/* Ensure focus is visible even inside containers */
[tabindex]:focus-visible {
  outline: 3px solid hsl(217.2 91.2% 59.8%);
  outline-offset: 2px;
}

/* Focus within indicator for composite widgets */
[role="tablist"]:focus-within,
[role="menu"]:focus-within,
[role="listbox"]:focus-within {
  box-shadow: inset 0 0 0 2px rgba(59, 130, 246, 0.2);
}

/* Screen reader only utility */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Make sr-only visible on focus (for skip links) */
.sr-only-focusable:focus,
.sr-only-focusable:focus-visible {
  position: static;
  width: auto;
  height: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Minimum touch target size for mobile (WCAG 2.5.5) */
@media (pointer: coarse) {
  button,
  [role="button"],
  [role="checkbox"],
  [role="radio"],
  [role="slider"],
  [role="switch"],
  [role="tab"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Exception for inline elements */
  p a,
  li a,
  span a {
    min-height: auto;
    min-width: auto;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  :root {
    --border: 0 0% 0%;
    --ring: 217.2 91.2% 40%;
  }

  .dark {
    --border: 0 0% 100%;
    --ring: 217.2 91.2% 70%;
  }

  button,
  input,
  select,
  textarea {
    border-width: 2px;
  }
}

/* Selection colors for better visibility */
::selection {
  background-color: hsl(217.2 91.2% 59.8%);
  color: white;
}

.dark ::selection {
  background-color: hsl(213.1 93.9% 67.8%);
  color: black;
}

/* =============================================
 * KEYBOARD NAVIGATION ENHANCEMENTS
 * ============================================= */

/* Skip link styling - visible on focus */
.skip-link {
  position: absolute;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  z-index: 9999;
  padding: 0.75rem 1.5rem;
  background-color: hsl(217.2 91.2% 59.8%);
  color: white;
  font-weight: 600;
  border-radius: 0.375rem;
  text-decoration: none;
  transition: top 0.2s ease;
}

.skip-link:focus {
  top: 1rem;
}

/* Focus trap indicator */
[data-focus-trap="active"] {
  position: relative;
}

[data-focus-trap="active"]::before {
  content: "";
  position: absolute;
  inset: -2px;
  border: 2px solid hsl(217.2 91.2% 59.8%);
  border-radius: inherit;
  pointer-events: none;
  opacity: 0.5;
}

/* Keyboard-only visible elements */
.keyboard-only {
  opacity: 0;
  pointer-events: none;
}

:focus-visible ~ .keyboard-only,
:focus-within .keyboard-only {
  opacity: 1;
  pointer-events: auto;
}

/* =============================================
 * COLOR CONTRAST IMPROVEMENTS (WCAG AA 4.5:1)
 * ============================================= */

/* Ensure text on colored backgrounds meets contrast requirements */
.text-on-primary {
  color: white;
}

.text-on-secondary {
  color: hsl(0 0% 9%);
}

/* Improved muted text contrast - meets 4.5:1 ratio */
.text-muted-enhanced {
  color: hsl(0 0% 35%);
}

.dark .text-muted-enhanced {
  color: hsl(0 0% 70%);
}

/* Error state with sufficient contrast */
.text-error {
  color: hsl(0 84.2% 40%);
}

.dark .text-error {
  color: hsl(0 84.2% 70%);
}

/* Success state with sufficient contrast */
.text-success {
  color: hsl(142.1 70.6% 30%);
}

.dark .text-success {
  color: hsl(142.1 70.6% 60%);
}

/* Warning state with sufficient contrast */
.text-warning {
  color: hsl(45 100% 35%);
}

.dark .text-warning {
  color: hsl(45 100% 65%);
}

/* =============================================
 * SCREEN READER ANNOUNCEMENTS
 * ============================================= */

/* Live region styling */
[aria-live] {
  /* Ensure live regions don't affect layout when hidden */
}

[aria-live="polite"].sr-only,
[aria-live="assertive"].sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Status message styling when visible */
[role="status"]:not(.sr-only) {
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
  background-color: hsl(217.2 91.2% 95%);
  color: hsl(217.2 91.2% 30%);
  font-size: 0.875rem;
}

.dark [role="status"]:not(.sr-only) {
  background-color: hsl(217.2 91.2% 15%);
  color: hsl(217.2 91.2% 85%);
}

/* Alert styling when visible */
[role="alert"]:not(.sr-only) {
  padding: 0.75rem 1rem;
  border-radius: 0.375rem;
  background-color: hsl(0 84.2% 95%);
  color: hsl(0 84.2% 30%);
  font-weight: 500;
  border-left: 4px solid hsl(0 84.2% 60.2%);
}

.dark [role="alert"]:not(.sr-only) {
  background-color: hsl(0 84.2% 15%);
  color: hsl(0 84.2% 85%);
}

/* =============================================
 * ADDITIONAL ARIA STATE STYLING
 * ============================================= */

/* Disabled state */
[aria-disabled="true"] {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* Busy/loading state */
[aria-busy="true"] {
  cursor: wait;
  opacity: 0.7;
}

/* Invalid form field */
[aria-invalid="true"] {
  border-color: hsl(0 84.2% 60.2%) !important;
  box-shadow: 0 0 0 1px hsl(0 84.2% 60.2%);
}

[aria-invalid="true"]:focus-visible {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3);
}

/* Expanded state indicator */
[aria-expanded="true"] > .expand-icon {
  transform: rotate(180deg);
}

/* Selected state */
[aria-selected="true"] {
  background-color: hsl(217.2 91.2% 95%);
}

.dark [aria-selected="true"] {
  background-color: hsl(217.2 91.2% 20%);
}

/* Current page indicator */
[aria-current="page"] {
  font-weight: 600;
  position: relative;
}

[aria-current="page"]::after {
  content: "";
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 2px;
  background-color: currentColor;
}

/* =============================================
 * RESPONSIVE DESIGN IMPROVEMENTS
 * ============================================= */

/* Mobile-first responsive text sizing */
@media (max-width: 320px) {
  html {
    font-size: 14px;
  }
}

@media (min-width: 321px) and (max-width: 375px) {
  html {
    font-size: 15px;
  }
}

@media (min-width: 376px) {
  html {
    font-size: 16px;
  }
}

/* Prevent horizontal scroll on mobile */
body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Ensure text is readable without horizontal scrolling */
.text-responsive {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
}

/* Responsive form elements */
@media (max-width: 640px) {
  input,
  select,
  textarea {
    font-size: 16px !important; /* Prevents iOS zoom on focus */
    padding: 12px;
    min-height: 48px;
  }

  button {
    min-height: 48px;
    padding: 12px 16px;
  }

  /* Stack form fields on mobile */
  .form-grid {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
}

/* Tablet breakpoints */
@media (min-width: 768px) and (max-width: 1024px) {
  .container {
    padding-left: 24px;
    padding-right: 24px;
  }
}

/* Touch-friendly spacing */
@media (pointer: coarse) {
  .touch-spacing > * + * {
    margin-top: 16px;
  }

  /* Increase gap between tappable elements */
  .button-group {
    gap: 12px;
  }
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
  .safe-area-inset {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
}

/* Cube Mini - Always-visible header icon */
.cube-mini {
  width: 32px;
  height: 32px;
  margin-right: 12px;
  flex-shrink: 0;
}

.cube-mini-inner {
  width: 100%;
  height: 100%;
}

.cube-mini-svg {
  width: 100%;
  height: 100%;
  display: block;
}

@layer base {
  :root {
    /* Core colors - Light mode */
    --background: 0 0% 100%;
    --foreground: 222 47% 11%;
    --card: 0 0% 100%;
    --card-foreground: 222 47% 11%;
    --popover: 0 0% 100%;
    --popover-foreground: 222 47% 11%;
    --primary: 221 83% 53%;
    --primary-foreground: 0 0% 100%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;
    --muted: 210 40% 96%;
    --muted-foreground: 215 16% 47%;
    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: 214 32% 91%;
    --input: 214 32% 91%;
    --ring: 221 83% 53%;

    /* Chart colors - Light mode (vibrant) */
    --chart-1: 221 83% 53%;
    --chart-2: 142 71% 45%;
    --chart-3: 262 83% 58%;
    --chart-4: 38 92% 50%;
    --chart-5: 0 84% 60%;

    /* Success/Warning/Info semantic colors */
    --success: 142 71% 45%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 0%;
    --info: 199 89% 48%;
    --info-foreground: 0 0% 100%;

    --radius: 0.5rem;

    /* Sidebar - Light mode */
    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    /* Core colors - Dark mode (elegant, easy on eyes) */
    --background: 224 71% 4%;
    --foreground: 213 31% 91%;
    --card: 224 71% 4%;
    --card-foreground: 213 31% 91%;
    --popover: 224 71% 4%;
    --popover-foreground: 213 31% 91%;
    --primary: 217 91% 60%;
    --primary-foreground: 222 47% 11%;
    --secondary: 222 47% 11%;
    --secondary-foreground: 213 31% 91%;
    --muted: 223 47% 11%;
    --muted-foreground: 215 20% 65%;
    --accent: 216 34% 17%;
    --accent-foreground: 213 31% 91%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 0 85% 97%;
    --border: 216 34% 17%;
    --input: 216 34% 17%;
    --ring: 224 76% 48%;

    /* Chart colors - Dark mode (softer, easier on eyes) */
    --chart-1: 217 91% 60%;
    --chart-2: 142 69% 58%;
    --chart-3: 262 83% 68%;
    --chart-4: 38 92% 60%;
    --chart-5: 0 84% 65%;

    /* Success/Warning/Info semantic colors - Dark mode */
    --success: 142 69% 58%;
    --success-foreground: 0 0% 0%;
    --warning: 38 92% 60%;
    --warning-foreground: 0 0% 0%;
    --info: 199 89% 58%;
    --info-foreground: 0 0% 0%;

    /* Sidebar - Dark mode */
    --sidebar-background: 224 71% 4%;
    --sidebar-foreground: 213 31% 91%;
    --sidebar-primary: 217 91% 60%;
    --sidebar-primary-foreground: 222 47% 11%;
    --sidebar-accent: 216 34% 17%;
    --sidebar-accent-foreground: 213 31% 91%;
    --sidebar-border: 216 34% 17%;
    --sidebar-ring: 224 76% 48%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  /* Smooth theme transitions */
  html {
    @apply transition-colors duration-200;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply bg-background text-foreground;
    @apply transition-colors duration-200;
  }

  /* Prevent flash of unstyled content during theme load */
  html:not(.light):not(.dark) {
    visibility: hidden;
  }

  /* Dark mode improvements for better legibility */
  .dark {
    color-scheme: dark;
  }

  .dark input,
  .dark select,
  .dark textarea {
    background-color: hsl(var(--input));
    color: hsl(var(--foreground));
    border-color: hsl(var(--border));
  }

  .dark input::placeholder,
  .dark textarea::placeholder {
    color: hsl(var(--muted-foreground));
    opacity: 0.6;
  }

  .dark select option {
    background-color: hsl(var(--popover));
    color: hsl(var(--foreground));
  }

  .dark label {
    color: hsl(var(--foreground));
  }

  /* Improve checkbox visibility in dark mode */
  .dark [type="checkbox"] {
    border-color: hsl(var(--border));
    background-color: hsl(var(--input));
  }

  .dark [type="checkbox"]:checked {
    background-color: hsl(var(--primary));
    border-color: hsl(var(--primary));
  }

  /* Better card contrast in dark mode */
  .dark .bg-blue-50 {
    background-color: rgb(30, 58, 138, 0.2) !important;
  }

  .dark .bg-indigo-50 {
    background-color: rgb(67, 56, 202, 0.2) !important;
  }

  .dark .bg-green-50 {
    background-color: rgb(22, 101, 52, 0.2) !important;
  }

  .dark .bg-emerald-50 {
    background-color: rgb(6, 78, 59, 0.2) !important;
  }

  .dark .bg-red-50 {
    background-color: rgb(127, 29, 29, 0.2) !important;
  }

  .dark .bg-gray-50 {
    background-color: rgb(55, 65, 81, 0.2) !important;
  }

  /* Improve text contrast in dark mode colored cards */
  .dark .text-blue-800,
  .dark .text-blue-900 {
    color: rgb(147, 197, 253) !important;
  }

  .dark .text-indigo-800,
  .dark .text-indigo-900 {
    color: rgb(165, 180, 252) !important;
  }

  .dark .text-green-800,
  .dark .text-green-900 {
    color: rgb(134, 239, 172) !important;
  }

  .dark .text-emerald-800,
  .dark .text-emerald-900 {
    color: rgb(110, 231, 183) !important;
  }

  .dark .text-red-800,
  .dark .text-red-900 {
    color: rgb(252, 165, 165) !important;
  }

  .dark .border-blue-200 {
    border-color: rgb(59, 130, 246, 0.3) !important;
  }

  .dark .border-indigo-200 {
    border-color: rgb(99, 102, 241, 0.3) !important;
  }

  .dark .border-green-200 {
    border-color: rgb(34, 197, 94, 0.3) !important;
  }

  .dark .border-emerald-200 {
    border-color: rgb(16, 185, 129, 0.3) !important;
  }

  .dark .border-red-200 {
    border-color: rgb(239, 68, 68, 0.3) !important;
  }
}

/* Print Styles */
@media print {
  /* Preserve colors for charts and cards in print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Force light mode for print - override dark mode completely */
  body,
  html {
    color-scheme: light !important;
    background-color: white !important;
    color: black !important;
  }

  /* Keep backgrounds for visual hierarchy - don't strip colors */
  .bg-blue-50 {
    background-color: #eff6ff !important;
  }

  .bg-indigo-50 {
    background-color: #eef2ff !important;
  }

  .bg-green-50 {
    background-color: #f0fdf4 !important;
  }

  .bg-red-50,
  .bg-orange-50 {
    background-color: #fef2f2 !important;
  }

  .bg-yellow-50 {
    background-color: #fefce8 !important;
  }

  .bg-gray-50 {
    background-color: #f9fafb !important;
  }

  .bg-gray-100 {
    background-color: #f3f4f6 !important;
  }

  .bg-purple-50 {
    background-color: #faf5ff !important;
  }

  /* Hide all interactive elements */
  .no-print,
  button:not(.print-only),
  input[type="checkbox"],
  input[type="range"],
  select,
  header,
  nav,
  .dark-mode-toggle,
  [role="tablist"],
  .accordion-trigger {
    display: none !important;
  }

  .print-only {
    display: inline !important;
  }

  /* Cube Mini - Always visible in print, loader hidden */
  .cube-mini {
    display: block !important;
    filter: none !important;
  }

  .cube-loader {
    display: none !important;
  }

  /* Flatten all cards - remove shadows and 3D effects */
  * {
    box-shadow: none !important;
    transform: none !important;
    animation: none !important;
    transition: none !important;
  }

  /* High contrast borders */
  .border,
  [class*="border-"] {
    border-color: #000 !important;
  }

  /* Force all text to dark color */
  * {
    color: #000 !important;
  }

  /* Page break rules - prevent breaking inside elements */
  .flip-card-container,
  .card,
  [data-print-section],
  [data-sensitivity-section],
  [data-scenarios-section],
  table,
  .chart-container,
  .sankey-container,
  h2, h3, h4 {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Flatten flip cards - show front only */
  .flip-card-container {
    perspective: none !important;
    height: auto !important;
  }

  .flip-card-inner {
    transform: none !important;
    position: relative !important;
  }

  .flip-card-back {
    display: none !important;
  }

  .flip-card-front {
    position: relative !important;
    transform: none !important;
    backface-visibility: visible !important;
  }

  /* Force show all sections */
  [data-print-section],
  [data-sensitivity-section],
  [data-scenarios-section] {
    display: block !important;
  }

  /* AI Snapshot on first page */
  .hidden.print\\:block {
    display: block !important;
  }

  .print-page-break-after {
    page-break-after: always !important;
  }

  /* Expand accordions for print */
  [data-state="closed"] {
    display: block !important;
  }

  .accordion-content {
    display: block !important;
    height: auto !important;
  }

  /* Show all tab content */
  [role="tabpanel"][data-state="inactive"] {
    display: block !important;
    margin-top: 20px !important;
  }

  [role="tabpanel"]::before {
    content: attr(aria-label) !important;
    display: block !important;
    font-weight: bold !important;
    font-size: 18px !important;
    margin-bottom: 10px !important;
    border-bottom: 2px solid #000 !important;
    padding-bottom: 5px !important;
  }

  /* Ensure charts render at high resolution */
  svg {
    max-width: 100% !important;
    height: auto !important;
  }

  /* Better table formatting */
  table {
    width: 100% !important;
    border-collapse: collapse !important;
  }

  th, td {
    border: 1px solid #000 !important;
    padding: 8px !important;
  }

  /* Page headers avoid breaks */
  h2, h3, h4 {
    page-break-after: avoid !important;
    margin-top: 20px !important;
  }

  /* Section spacing */
  .card,
  section {
    margin-bottom: 30px !important;
  }

  /* Footer on last page */
  .print-footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    font-size: 10px;
    padding: 10px;
    border-top: 1px solid #000;
  }

  /* Prevent page breaks inside critical sections */
  .print-block {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    display: block !important;
  }

  /* Hide all interactive elements */
  button,
  select,
  [role="button"],
  .print-hide {
    display: none !important;
  }

  /* Ensure charts do not break across pages */
  .chart-block {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    max-width: 100% !important;
  }

  /* Two-column layout for inputs */
  .print-two-col {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 16px !important;
  }

  /* Two-by-two tile grid */
  .print-tile-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 20px !important;
  }

  /* Three-column summary bar */
  .print-summary-3 {
    display: grid !important;
    grid-template-columns: 1fr 1fr 1fr !important;
    gap: 20px !important;
  }

  /* Clean body typography */
  body {
    font-size: 12pt !important;
    line-height: 1.4 !important;
  }

  /* Input summary styling */
  .print-input-summary {
    margin-bottom: 30px !important;
    padding: 20px !important;
    border: 2px solid #000 !important;
  }

  .print-input-summary h3 {
    font-size: 14pt !important;
    font-weight: bold !important;
    margin-bottom: 8px !important;
    margin-top: 0 !important;
  }

  .print-input-summary p {
    margin: 4px 0 !important;
  }

  /* ==============================================
   * ADDITIONAL PRINT-SPECIFIC CSS (NEW SECTION)
   * ============================================== */

  /* Disable animations and transitions */
  * {
    animation: none !important;
    transition: none !important;
  }

  /* Hide interactive UI */
  .flip-hint,
  .toggle,
  .tab-controls {
    display: none !important;
  }

  /* Prevent drift/out-of-bounds layout */
  html, body {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* No card breakage */
  .print-section,
  .snapshot-block,
  .analysis-block,
  .wealth-flow-block,
  .gen-card {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Grid layout for user input summary */
  .user-inputs-print {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 12px 48px !important;
    margin-top: 24px !important;
  }

  /* Flatten flip cards */
  .flip-card-inner {
    transform: none !important;
  }

  .flip-card-back {
    display: none !important;
  }

  /* Chart scaling */
  canvas,
  svg {
    max-width: 100% !important;
    height: auto !important;
    page-break-inside: avoid !important;
  }

  /* Clean print type */
  body {
    font-size: 12pt !important;
    line-height: 1.35 !important;
  }

  /* Chart container fixes */
  .chart-container {
    max-height: 400px !important;
    overflow: visible !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  /* Generational wealth card clean printing */
  .gen-card {
    background: #e7e7e7 !important;
    color: black !important;
  }

  /* Math section prints fully expanded */
  .math-print-section {
    display: block !important;
    page-break-inside: avoid !important;
  }

  /* Ensure all details/accordion elements are forced open */
  details,
  details[open] {
    display: block !important;
  }

  details > summary {
    display: none !important;
  }

  /* Force accordion content to show */
  [data-state="closed"],
  [data-state="inactive"] {
    display: block !important;
    height: auto !important;
    overflow: visible !important;
  }

  .accordion-trigger {
    display: none !important;
  }

  /* Force all collapsible sections to expand */
  [role="tabpanel"] {
    display: block !important;
  }

  /* Show all card content in print */
  .hidden:not(.print\\:block) {
    display: revert !important;
  }

  /* Fixed card dimensions for consistency */
  .flip-card-container,
  .print-tile-grid > * {
    width: 100% !important;
    max-width: 350px !important;
    height: auto !important;
    min-height: 200px !important;
  }

  /* Section spacing consistency */
  .print-section {
    margin-bottom: 32px !important;
  }

  /* Human-readable summary styles */
  .print-human-summary {
    page-break-before: always !important;
  }

  .print-human-summary h1 {
    font-size: 24pt !important;
    font-weight: bold !important;
  }

  .print-human-summary h2 {
    font-size: 18pt !important;
    font-weight: bold !important;
    margin-top: 24px !important;
  }

  .print-human-summary h3 {
    font-size: 14pt !important;
    font-weight: 600 !important;
  }

  /* Left-align all text in print summary */
  .print-human-summary * {
    text-align: left !important;
  }

  /* Page breaks */
  .print-page-break-before {
    page-break-before: always !important;
  }

  .print-page-break-after {
    page-break-after: always !important;
  }

  /* Ensure charts don't overflow */
  .chart-container,
  .sankey-container,
  .wealth-flow-responsive {
    max-width: 100% !important;
    overflow: visible !important;
  }

  /* Fix AI Snapshot alignment */
  .snapshot-block {
    margin: 0 !important;
    padding: 24px !important;
  }

  /* Hide cube in print */
  .cube,
  .stage {
    display: none !important;
  }
}

/* Section Spacing Consistency */
.space-y-8 > * + * {
  margin-top: 32px !important;
}

/* Mobile Responsive Styles */
@media (max-width: 640px) {
  .wealth-flow-responsive svg,
  .wealth-flow-responsive canvas {
    min-width: 600px !important; /* prevents squishing */
  }

  .wealth-flow-responsive {
    overflow-x: auto !important;
    padding-bottom: 8px;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity;
  }

  /* Center the chart content on load */
  .wealth-flow-responsive > div {
    display: flex;
    justify-content: center;
    min-width: 100%;
  }
}

@media screen {
  .print-only {
    display: none !important;
  }
}

/* ==============================================
 * ENHANCED PRINT STYLES - PROFESSIONAL REPORTS
 * Header/Footer on each page, QR code, Date stamp
 * ============================================== */

/* Page setup for print */
@page {
  size: letter;
  margin: 0.75in 0.5in 1in 0.5in;
}

@page :first {
  margin-top: 0.5in;
}

@page :left {
  margin-left: 0.75in;
  margin-right: 0.5in;
}

@page :right {
  margin-left: 0.5in;
  margin-right: 0.75in;
}

@media print {
  /* ============================================
   * PRINT LAYOUT COMPONENT STYLES
   * ============================================ */

  /* Print Layout Container */
  .print-layout {
    width: 100% !important;
    min-height: 100vh !important;
    background: white !important;
    color: #1a1a1a !important;
  }

  /* Print Header - Fixed at top of each page */
  .print-header {
    display: block !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    background: white !important;
    border-bottom: 2px solid #1a5fb4 !important;
    padding: 16px 24px 12px 24px !important;
    z-index: 1000 !important;
  }

  .print-header-content {
    display: flex !important;
    justify-content: space-between !important;
    align-items: flex-start !important;
    max-width: 100% !important;
  }

  .print-header-left {
    display: flex !important;
    flex-direction: column !important;
    gap: 4px !important;
  }

  .print-header-right {
    text-align: right !important;
  }

  .print-logo {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    margin-bottom: 6px !important;
  }

  .print-logo-svg {
    width: 32px !important;
    height: 32px !important;
    flex-shrink: 0 !important;
  }

  .print-logo-svg polygon,
  .print-logo-svg line {
    stroke: #1a5fb4 !important;
  }

  .print-logo-svg polygon[fill] {
    fill: #1a5fb4 !important;
  }

  .print-logo-text {
    font-size: 13pt !important;
    font-weight: 600 !important;
    color: #1a5fb4 !important;
    letter-spacing: -0.02em !important;
  }

  .print-title {
    font-size: 18pt !important;
    font-weight: 700 !important;
    color: #1a1a1a !important;
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.2 !important;
  }

  .print-prepared-for {
    font-size: 10pt !important;
    color: #4a5568 !important;
    margin: 4px 0 0 0 !important;
  }

  .print-prepared-for strong {
    color: #1a1a1a !important;
    font-weight: 600 !important;
  }

  .print-metadata {
    display: flex !important;
    flex-direction: column !important;
    gap: 3px !important;
    font-size: 9pt !important;
  }

  .print-date,
  .print-report-id {
    display: flex !important;
    gap: 4px !important;
    align-items: baseline !important;
  }

  .print-label {
    color: #718096 !important;
  }

  .print-value {
    color: #1a1a1a !important;
    font-weight: 500 !important;
  }

  .print-time {
    margin-left: 6px !important;
    color: #718096 !important;
  }

  /* Print Content - Main body */
  .print-content {
    padding-top: 100px !important; /* Space for fixed header */
    padding-bottom: 120px !important; /* Space for fixed footer */
    min-height: calc(100vh - 220px) !important;
  }

  /* Print Footer - Fixed at bottom of each page */
  .print-footer {
    display: block !important;
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    background: white !important;
    border-top: 1px solid #e2e8f0 !important;
    padding: 12px 24px 16px 24px !important;
    z-index: 1000 !important;
  }

  .print-footer-content {
    display: flex !important;
    justify-content: space-between !important;
    align-items: flex-start !important;
    gap: 24px !important;
  }

  .print-footer-left {
    flex: 1 !important;
    max-width: 70% !important;
  }

  .print-footer-right {
    flex-shrink: 0 !important;
  }

  .print-disclaimer {
    font-size: 7pt !important;
    color: #64748b !important;
    margin: 0 0 4px 0 !important;
    line-height: 1.4 !important;
  }

  .print-copyright {
    font-size: 7pt !important;
    color: #94a3b8 !important;
    margin: 0 !important;
  }

  /* QR Code Container */
  .print-qr-container {
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    gap: 4px !important;
    padding: 4px !important;
    background: #f8fafc !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: 4px !important;
  }

  .print-qr-code {
    width: 60px !important;
    height: 60px !important;
  }

  .print-qr-code svg {
    width: 60px !important;
    height: 60px !important;
  }

  .print-qr-label {
    font-size: 6pt !important;
    color: #64748b !important;
    text-align: center !important;
    line-height: 1.3 !important;
    max-width: 80px !important;
  }

  /* Page Number */
  .print-page-number {
    text-align: center !important;
    margin-top: 8px !important;
    font-size: 8pt !important;
    color: #94a3b8 !important;
    border-top: 1px solid #e2e8f0 !important;
    padding-top: 6px !important;
  }

  .print-current-page::after {
    content: "Page " counter(page) " of " counter(pages);
  }

  /* Print Button - Hidden when printing */
  .print-button-container {
    display: none !important;
  }

  /* ============================================
   * PRINT SECTION COMPONENTS
   * ============================================ */

  .print-section {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    margin-bottom: 24px !important;
    padding: 16px !important;
    background: #ffffff !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: 6px !important;
  }

  .print-page-break {
    page-break-before: always !important;
    break-before: page !important;
    height: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* ============================================
   * PRINT CHART OPTIMIZATION
   * ============================================ */

  .print-chart-container {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    margin: 16px 0 !important;
    padding: 12px !important;
    background: #ffffff !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: 4px !important;
  }

  .print-chart-title {
    font-size: 12pt !important;
    font-weight: 600 !important;
    color: #1a1a1a !important;
    margin: 0 0 12px 0 !important;
    padding-bottom: 8px !important;
    border-bottom: 1px solid #f1f5f9 !important;
  }

  .print-chart-content {
    width: 100% !important;
    max-height: 400px !important;
    overflow: visible !important;
  }

  .print-chart-content svg,
  .print-chart-content canvas {
    max-width: 100% !important;
    height: auto !important;
  }

  /* ============================================
   * PRINT TABLE STYLING
   * ============================================ */

  .print-table-container {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    margin: 16px 0 !important;
  }

  .print-table {
    width: 100% !important;
    border-collapse: collapse !important;
    font-size: 9pt !important;
    background: white !important;
  }

  .print-table-caption {
    font-size: 11pt !important;
    font-weight: 600 !important;
    text-align: left !important;
    margin-bottom: 8px !important;
    color: #1a1a1a !important;
    caption-side: top !important;
  }

  .print-table th {
    background-color: #f1f5f9 !important;
    font-weight: 600 !important;
    color: #1e293b !important;
    text-align: left !important;
    padding: 10px 12px !important;
    border: 1px solid #cbd5e1 !important;
  }

  .print-table td {
    padding: 8px 12px !important;
    border: 1px solid #e2e8f0 !important;
    vertical-align: top !important;
    color: #334155 !important;
  }

  .print-table tr:nth-child(even) td {
    background-color: #f8fafc !important;
  }

  /* Repeat table header on each page */
  .print-table thead {
    display: table-header-group !important;
  }

  .print-table tfoot {
    display: table-footer-group !important;
  }

  /* ============================================
   * PRINT SUMMARY CARDS
   * ============================================ */

  .print-summary-card {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    padding: 16px 20px !important;
    background: #ffffff !important;
    border: 1px solid #e2e8f0 !important;
    border-radius: 6px !important;
    margin-bottom: 12px !important;
  }

  .print-summary-card--default {
    border-left: 4px solid #64748b !important;
  }

  .print-summary-card--success {
    border-left: 4px solid #22c55e !important;
    background: linear-gradient(to right, #f0fdf4, #ffffff) !important;
  }

  .print-summary-card--warning {
    border-left: 4px solid #f59e0b !important;
    background: linear-gradient(to right, #fffbeb, #ffffff) !important;
  }

  .print-summary-card--danger {
    border-left: 4px solid #ef4444 !important;
    background: linear-gradient(to right, #fef2f2, #ffffff) !important;
  }

  .print-summary-card-title {
    font-size: 9pt !important;
    font-weight: 500 !important;
    color: #64748b !important;
    text-transform: uppercase !important;
    letter-spacing: 0.05em !important;
    margin: 0 0 6px 0 !important;
  }

  .print-summary-card-value {
    font-size: 20pt !important;
    font-weight: 700 !important;
    color: #0f172a !important;
    margin: 0 !important;
    line-height: 1.1 !important;
    font-variant-numeric: tabular-nums !important;
  }

  .print-summary-card-subtitle {
    font-size: 8pt !important;
    color: #64748b !important;
    margin: 6px 0 0 0 !important;
  }

  /* ============================================
   * GLASSMORPHISM - FLATTEN FOR PRINT
   * ============================================ */

  .glass-card,
  .glass-panel,
  .glass-frosted,
  [class*="glass-"] {
    background: #ffffff !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    border: 1px solid #e2e8f0 !important;
    box-shadow: none !important;
  }

  .glass-emerald {
    background: #f0fdf4 !important;
    border-left: 4px solid #22c55e !important;
  }

  .glass-blue {
    background: #eff6ff !important;
    border-left: 4px solid #3b82f6 !important;
  }

  .glass-amber {
    background: #fffbeb !important;
    border-left: 4px solid #f59e0b !important;
  }

  .glass-rose {
    background: #fef2f2 !important;
    border-left: 4px solid #f43f5e !important;
  }

  .glass-purple {
    background: #faf5ff !important;
    border-left: 4px solid #8b5cf6 !important;
  }

  /* Glass text - ensure readability */
  .glass-text,
  .glass-text-muted,
  .glass-metric {
    color: #1a1a1a !important;
    text-shadow: none !important;
  }

  /* ============================================
   * ENHANCED COLOR PRESERVATION
   * ============================================ */

  /* Semantic colors for print */
  .bg-success-print,
  .print-success {
    background-color: #dcfce7 !important;
    border-color: #22c55e !important;
  }

  .bg-warning-print,
  .print-warning {
    background-color: #fef3c7 !important;
    border-color: #f59e0b !important;
  }

  .bg-danger-print,
  .print-danger {
    background-color: #fee2e2 !important;
    border-color: #ef4444 !important;
  }

  .bg-info-print,
  .print-info {
    background-color: #dbeafe !important;
    border-color: #3b82f6 !important;
  }

  /* Colored text for print */
  .text-success-print {
    color: #166534 !important;
  }

  .text-warning-print {
    color: #92400e !important;
  }

  .text-danger-print {
    color: #991b1b !important;
  }

  .text-info-print {
    color: #1e40af !important;
  }
}

/* Screen-only styles for print components */
@media screen {
  /* Print button styling for screen */
  .print-button-container {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 50;
  }

  .print-button {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 20px;
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    color: white;
    border: none;
    border-radius: 12px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 4px 14px rgba(59, 130, 246, 0.4);
    transition: all 0.2s ease;
  }

  .print-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.5);
  }

  .print-button:active {
    transform: translateY(0);
  }

  .print-button svg {
    width: 18px;
    height: 18px;
  }

  /* Hide print-only elements on screen */
  .print-header,
  .print-footer {
    display: none;
  }

  /* Print section preview on screen */
  .print-section {
    margin-bottom: 16px;
  }

  /* Print chart preview */
  .print-chart-container {
    margin: 16px 0;
  }

  /* Print summary card preview */
  .print-summary-card {
    padding: 16px;
    border-radius: 8px;
    margin-bottom: 12px;
  }

  .print-summary-card--success {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), transparent);
    border-left: 4px solid #22c55e;
  }

  .print-summary-card--warning {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), transparent);
    border-left: 4px solid #f59e0b;
  }

  .print-summary-card--danger {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), transparent);
    border-left: 4px solid #ef4444;
  }

  /* Dark mode variants for print components on screen */
  .dark .print-summary-card {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.1);
  }

  .dark .print-summary-card--success {
    background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), transparent);
  }

  .dark .print-summary-card--warning {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), transparent);
  }

  .dark .print-summary-card--danger {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), transparent);
  }

  .dark .print-summary-card-title {
    color: rgba(255, 255, 255, 0.6);
  }

  .dark .print-summary-card-value {
    color: rgba(255, 255, 255, 0.95);
  }

  .dark .print-summary-card-subtitle {
    color: rgba(255, 255, 255, 0.5);
  }
}
